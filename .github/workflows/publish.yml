---
name: eve-kernel build
on:  # yamllint disable-line rule:truthy
  workflow_dispatch:
  pull_request:
    branches:
      - "master"
      - "[0-9]+.[0-9]+"
      - "[0-9]+.[0-9]+-stable"

concurrency:
  group: ${{ github.workflow }}
  cancel-in-progress: true

jobs:
  packages:
    runs-on: ubuntu-22.04
    steps:
      - name: Get eve-kernel
        uses: actions/checkout@v3
        with:
          ref: 'eve-kernel-amd64-v6.1.38-generic'
      - name: Build eve-kernel-amd64-v6.1.38-generic
        run: |
          make -f Makefile.eve kernel-gcc
